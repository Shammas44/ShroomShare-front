<ion-content class="ion-padding">
  <div class="wrapper">
    <div class="chat-title">
      <h1>Chat</h1>
    </div>

    <!-- messages display -->
    <ion-grid class="chat-messages-div">
      <div *ngFor="let message of messages; index as i;" class="chat-message-wrapper">

        <!-- user icon + username -->
        <!-- message from user -->
        <ion-row *ngIf="message.userId === currentUserId" class="ion-justify-content-end ion-align-items-end">
          <ion-col *ngIf="message.userId === currentUserId" size="auto" class="ion-no-padding" offset="0.3">
            <span class="chat-username">{{ message.username }}</span>
          </ion-col>
          <ion-col *ngIf="message.userId === currentUserId" size="auto" class="ion-no-padding" offset="0.3">
            <img src="assets/icon/chat/person-circle-outline.svg">
          </ion-col>
        </ion-row>

        <!-- message from other -->
        <ion-row *ngIf="message.userId !== currentUserId" class="ion-justify-content-start ion-align-items-end">
          <ion-col *ngIf="message.userId !== currentUserId" size="auto" class="ion-no-padding" offset="0.3">
            <img src="assets/icon/chat/person-circle-outline.svg">
          </ion-col>
          <ion-col *ngIf="message.userId !== currentUserId" size="auto" class="ion-no-padding" offset="0.3">
            <span class="chat-username">{{ message.username }}</span>
          </ion-col>
        </ion-row>

        <!-- user message -->
        <ion-row *ngIf="message.userId === currentUserId" class="ion-justify-content-end">
          <span class="chat-message-right">{{ message.value }}</span>
        </ion-row>
        <ion-row *ngIf="message.userId !== currentUserId" class="ion-justify-content-start">
          <span class="chat-message-left">{{ message.value }}</span>
        </ion-row>

      </div>
    </ion-grid>

    <div class="wrapper__user-input">
      <!-- language form -->
      <form #languageForm="ngForm" (change)="onLanguageChange(languageForm)" class="ion-justify-content-end language-form">
        <select [(ngModel)]="language" class="language-select">
          <option class="flag-option french" value="fr">
            franÃ§ais
          </option>
          <option class="flag-option italian" value="it">
            italiano
          </option>
          <option class="flag-option german" value="de">
            deutsh
          </option>
          <option class="flag-option french" value="en">
            english
          </option>
        </select>
      </form>

      <!-- submit form -->
      <form #messageForm="ngForm" (submit)="onSubmit(messageForm)" class="submit-form">
        <ion-input inputmode="text" #username="ngModel" required="true" name="message" class="new-message-input"
          [(ngModel)]="lastMessage.value" placeholder="message">
        </ion-input>
        <ion-button fill="clear" type="submit" slot="icon-only" class="submit-messages-button">
          <ion-icon src="assets/icon/chat/send.svg"></ion-icon>
        </ion-button>
      </form>
    </div>
  </div>
</ion-content>
