<ion-header>
    <ion-toolbar>
      <ion-title>AddMushroom</ion-title>
    </ion-toolbar>
  </ion-header>
<ion-content>

<div *ngIf="!pictureTaked">
  <ion-button (click)="takePicture()">Ajouter un champignon</ion-button>
</div>

<div *ngIf="pictureTaked">
    <form [formGroup]="MushroomForm2" (ngSubmit)="addMushroom()">
        <ion-item>
            <ion-label>Image</ion-label>
            <br><br>
            <img [src]="pictureBase64" />
            <br><br>
            <ion-button (click)="takePicture()">Reprendre la photo</ion-button>
              
          </ion-item> 
        <ion-item>
          <ion-select class="form-control" interface="popover" placeholder="Select Species" ngModel name="Species" formControlName="specyId">
            <ion-select-option *ngFor="let species of speciesList$ | async " [value]="species.id" >{{species.name}}</ion-select-option>
          </ion-select>
        </ion-item>
        <div *ngIf="f['specyId'].errors">
        <ion-item lines="none" *ngIf="f['specyId'].touched && f['specyId'].errors['required']">
          <ion-text color="danger">Vous devez sélectionner une espèce</ion-text>
        </ion-item>
      </div>
        <ion-item>
          <ion-label>Description</ion-label>
          <ion-textarea ngModel class="form-control" name="Description" formControlName="description"></ion-textarea>
        </ion-item>
        <div *ngIf="f['description'].errors">
       <ion-item lines="none" *ngIf="f['description'].errors['maxlength']">
          <ion-text color="danger">La description est trop longue</ion-text>
        </ion-item>
        </div>

        <ion-button type="submit"  size="large" color="secondary" [disabled]="f['description'].errors || f['specyId'].errors">Enregistrer</ion-button>
        <!-- <button ion-button type="submit" block>Add mushroom</button> -->
      <!-- </form> -->
      
    </form>

</div>
